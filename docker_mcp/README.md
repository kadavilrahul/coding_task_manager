# Docker MCP Server Setup Guide\n\nThis repository contains everything needed to set up a Model Context Protocol (MCP) Puppeteer server using Docker on any new server.\n\n## Overview\n\nThe Model Context Protocol (MCP) enables AI models to interact with external systems through standardized protocols. This setup provides a Puppeteer-based MCP server that allows browser automation capabilities including:\n\n- Website navigation\n- Screenshot capture\n- JavaScript execution\n- Web page interaction\n- Element clicking and form filling\n\n## Directory Structure\n\n```\ndocker_mcp/\n├── README.md                 # This documentation\n├── Dockerfile               # Custom MCP Puppeteer image\n├── docker-compose.yml       # Docker Compose configuration\n├── configs/                 # Configuration files\n│   ├── claude-config.json   # Claude Desktop integration\n│   └── mcp-puppeteer-server.json  # Basic MCP server config\n├── scripts/                 # Utility scripts\n│   └── setup.sh            # Automated setup script\n└── docs/                    # Additional documentation\n```\n\n## Quick Start\n\n### Prerequisites\n\n- Docker installed and running\n- Docker Compose (usually included with Docker)\n- Minimum 2GB RAM available\n- Internet connection for pulling images\n\n### 1. Clone/Copy Files\n\n```bash\n# Copy the entire docker_mcp directory to your server\nscp -r docker_mcp/ user@your-server:/path/to/destination/\n```\n\n### 2. Run Setup Script\n\n```bash\ncd docker_mcp\nchmod +x scripts/setup.sh\n./scripts/setup.sh\n```\n\n### 3. Manual Setup (Alternative)\n\n```bash\n# Pull official MCP Puppeteer image\ndocker pull mcp/puppeteer:latest\n\n# Create screenshots directory\nmkdir -p screenshots\n\n# Run with Docker Compose\ndocker-compose up -d\n\n# Or run directly with Docker\ndocker run -i --rm --init -e DOCKER_CONTAINER=true mcp/puppeteer\n```\n\n## Configuration Options\n\n### Option 1: Official Docker Image (Recommended)\n\n```bash\ndocker run -i --rm --init -e DOCKER_CONTAINER=true mcp/puppeteer\n```\n\n### Option 2: Custom Build\n\n```bash\n# Build custom image\ndocker build -t mcp-puppeteer-custom .\n\n# Run with docker-compose\ndocker-compose up -d\n```\n\n### Option 3: NPX Alternative (Non-Docker)\n\n```bash\nnpx @modelcontextprotocol/server-puppeteer\n```\n\n## Claude Desktop Integration\n\n### Basic Configuration\n\nAdd to your Claude Desktop `claude_desktop_config.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"puppeteer\": {\n      \"command\": \"docker\",\n      \"args\": [\n        \"run\",\n        \"-i\",\n        \"--rm\",\n        \"--init\",\n        \"-e\",\n        \"DOCKER_CONTAINER=true\",\n        \"mcp/puppeteer\"\n      ]\n    }\n  }\n}\n```\n\n### Advanced Configuration with Custom Options\n\n```json\n{\n  \"mcpServers\": {\n    \"puppeteer-custom\": {\n      \"command\": \"docker\",\n      \"args\": [\n        \"run\",\n        \"-i\",\n        \"--rm\",\n        \"--init\",\n        \"-v\",\n        \"./screenshots:/app/screenshots\",\n        \"-e\",\n        \"DOCKER_CONTAINER=true\",\n        \"mcp-puppeteer-custom\"\n      ]\n    }\n  }\n}\n```\n\n## Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|----------|\n| `DOCKER_CONTAINER` | Indicates running in Docker | `true` |\n| `PUPPETEER_EXECUTABLE_PATH` | Path to Chromium executable | `/usr/bin/chromium-browser` |\n| `PUPPETEER_LAUNCH_OPTIONS` | JSON string with launch options | `{}` |\n| `ALLOW_DANGEROUS` | Allow dangerous operations | `false` |\n\n## Security Considerations\n\n- The Docker container runs with necessary privileges for Chrome/Chromium\n- Images are digitally signed by Docker\n- All MCP server images include Software Bill of Materials (SBOM)\n- Use `--security-opt seccomp:unconfined` only when necessary\n- Limit network access if running in production\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Container won't start**\n   ```bash\n   # Check Docker status\n   docker ps -a\n   \n   # Check logs\n   docker logs <container-id>\n   ```\n\n2. **Permission errors**\n   ```bash\n   # Ensure setup script is executable\n   chmod +x scripts/setup.sh\n   ```\n\n3. **Chrome/Chromium crashes**\n   ```bash\n   # Add security options to docker run\n   docker run --security-opt seccomp:unconfined --cap-add SYS_ADMIN ...\n   ```\n\n4. **Screenshot directory issues**\n   ```bash\n   # Create and set permissions\n   mkdir -p screenshots\n   chmod 777 screenshots\n   ```\n\n### Verification Commands\n\n```bash\n# Check if image was pulled\ndocker images | grep puppeteer\n\n# Test basic functionality\ndocker run -i --rm --init -e DOCKER_CONTAINER=true mcp/puppeteer --version\n\n# Check running containers\ndocker ps | grep puppeteer\n\n# View container logs\ndocker logs mcp-puppeteer-server\n```\n\n## Available MCP Tools\n\nOnce running, the MCP server provides these tools:\n\n- **navigate_to_url**: Navigate to a specific URL\n- **screenshot**: Take a screenshot of the current page\n- **click_element**: Click on webpage elements\n- **execute_javascript**: Run custom JavaScript\n- **fill_form**: Fill out web forms\n- **wait_for_element**: Wait for elements to appear\n\n## Performance Notes\n\n- **Memory**: Requires ~1-2GB RAM per instance\n- **Storage**: Docker image is ~1.3GB\n- **Network**: Bandwidth depends on websites being accessed\n- **CPU**: Moderate usage during active browsing\n\n## Deployment Variations\n\n### Development Environment\n```bash\n# Run with local volume mounting\ndocker run -i --rm -v $(pwd)/screenshots:/app/screenshots mcp/puppeteer\n```\n\n### Production Environment\n```bash\n# Use docker-compose with restart policies\ndocker-compose up -d --restart unless-stopped\n```\n\n### Cloud Deployment\n```bash\n# For cloud providers, ensure proper security groups\n# and resource allocation (minimum 2GB RAM)\n```\n\n## Integration Examples\n\n### With Claude Code CLI\n```bash\nclaude mcp add-json \"puppeteer\" '{\n  \"command\":\"docker\",\n  \"args\":[\"run\",\"-i\",\"--rm\",\"--init\",\"-e\",\"DOCKER_CONTAINER=true\",\"mcp/puppeteer\"]\n}'\n```\n\n### With Custom Applications\n```javascript\n// Example Node.js integration\nconst { spawn } = require('child_process');\n\nconst mcpServer = spawn('docker', [\n  'run', '-i', '--rm', '--init',\n  '-e', 'DOCKER_CONTAINER=true',\n  'mcp/puppeteer'\n]);\n```\n\n## Maintenance\n\n### Regular Updates\n```bash\n# Update to latest image\ndocker pull mcp/puppeteer:latest\n\n# Restart services\ndocker-compose restart\n```\n\n### Cleanup\n```bash\n# Remove unused images\ndocker image prune\n\n# Remove stopped containers\ndocker container prune\n```\n\n## Support and Resources\n\n- [MCP Documentation](https://docs.anthropic.com/claude/docs/mcp)\n- [Docker MCP Catalog](https://hub.docker.com/mcp)\n- [Puppeteer Documentation](https://pptr.dev/)\n- [GitHub Issues](https://github.com/docker/mcp-servers/issues)\n\n## License\n\nThis setup follows the licensing terms of the respective components:\n- Docker: Apache 2.0\n- Puppeteer: Apache 2.0\n- MCP Protocol: Anthropic License\n\n---\n\n**Note**: This documentation provides a standardized approach to deploying MCP Puppeteer servers on any new server. Adjust configurations based on your specific requirements and security policies."